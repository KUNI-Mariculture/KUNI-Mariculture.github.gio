---
title: "Mariculture"
output:
  html_document:
    theme: united
    highlight: tango
---

##Maping mariculture variables

```{r, echo=FALSE, warning=FALSE}

setwd("~/KUNI/KUNI-Mariculture.github.io")

suppressPackageStartupMessages({
  library(readr)
  library(dplyr)
  library(tidyr)
  library(ggplot2)
  library(knitr)
  library(shiny)
  library(googleVis)

})

```

```{r echo = FALSE}

shinyApp(
  
  ui <- shinyUI(fluidPage(
  
  # Application title
  titlePanel("Mariculture 2011"),
  
  # Show a plot of the generated distribution
  mainPanel(
    htmlOutput("gvis")
  )
)),


server <- shinyServer(function(input, output) {
  
  output$gvis=renderGvis({
    ##### MARICULTURE VARIABLES STARTS HERE
    ## Prepare data to be displayed
    #reading data
    
    x <- read_csv('maps/data/data_normalized_092616.csv')
    
    #This is the file with the matching column "FAO_Country"
    
    conversion <- read_csv('maps/data/CountryConversion.csv')
    
    gdp <- x %>% 
      filter(!is.na(gdp)) %>%
      rename(FAO_Country=country) %>%        #rename match column FAO_Country
      left_join(                             #joining harvest_countries with conversion data 
        conversion, 
        by = c("FAO_Country")) %>%
      select(FAO_Country, gdp) 
    
    # Plot countries
    
    gvisGeoChart(gdp, "FAO_Country", "gdp", hovervar="FAO_Country",
                 options=list(gvis.editor="GDP", colorAxis="{colors:['#FFFFFF', '#0000FF']}"))
    
    
  })
}),


 options = list(height = 500)
)

```



```{r, echo = FALSE}

#shinyAppDir
shinyAppDir("~/KUNI/KUNI-Mariculture.github.io/maps",
  options=list(
    width="100%", height=550
  )
) 
```


